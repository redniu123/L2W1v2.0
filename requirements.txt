# ============================================================================
# L2W1 v2.0 项目依赖环境配置 (RTX 2080Ti / CUDA 12.6 实测共存版)
# 核心特征: 强制对齐 NVIDIA 运行时库，解决 Torch 与 Paddle 的版本抢夺冲突
# ============================================================================

# --- 0. 基础环境 ---
# Python 3.10.19

# --- 1. NVIDIA CUDA 运行时组件 (环境稳定的基石) ---
# 这些版本必须精确锁定以同时满足 Torch 2.9.1 和 Paddle 3.2.0 的底层链接需求
--extra-index-url https://pypi.nvidia.com
nvidia-cublas-cu12==12.6.4.1
nvidia-cudnn-cu12==9.10.2.21
nvidia-nccl-cu12==2.27.5
nvidia-cusparselt-cu12==0.7.1
nvidia-cuda-runtime-cu12==12.6.77
nvidia-cuda-nvrtc-cu12==12.6.77
nvidia-cuda-cupti-cu12==12.6.80
nvidia-nvtx-cu12==12.6.77

# --- 2. 深度学习核心框架 ---
# PyTorch 核心
--extra-index-url https://download.pytorch.org/whl/cu126
torch==2.9.1+cu126
torchvision==0.24.1+cu126
torchaudio==2.9.1

# PaddlePaddle 核心 (Agent A: OCR 引擎)
--extra-index-url https://www.paddlepaddle.org.cn/packages/stable/cu126/
paddlepaddle-gpu==3.2.0

# --- 3. 大模型微调与量化 (Agent B: Qwen2.5-VL) ---
# 注意：huggingface-hub 必须锁定在 0.34.0 以适配当前的 Transformers 版本
huggingface-hub==0.34.0
transformers==4.57.3
peft==0.18.0
accelerate==1.12.0
bitsandbytes==0.49.0
qwen-vl-utils==0.0.14
sentencepiece==0.2.1
tokenizers==0.22.1
safetensors==0.6.2
regex==2025.11.3
av==16.0.1

# --- 4. 数据处理与计算机视觉 ---
opencv-python==4.12.0.88
numpy==2.1.2
pandas==2.3.3
pillow==11.3.0
scipy==1.15.3

# --- 5. 评估指标与工具 ---
editdistance==0.8.1
protobuf==6.33.0
tqdm==4.67.1
pyyaml==6.0.3
psutil==7.1.3
requests==2.32.5

# --- 6. 可视化与监控 ---
matplotlib==3.10.8
seaborn==0.13.2
tensorboard==2.20.0

# ============================================================================
# 安装指南 (针对离线/镜像环境):
# ============================================================================
# 1. 设置镜像源: export HF_ENDPOINT=https://hf-mirror.com
# 2. 安装底层库: pip install -r requirements.txt --no-deps
# ============================================================================